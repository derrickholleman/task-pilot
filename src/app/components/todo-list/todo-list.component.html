<div class="max-w-2xl mx-auto mt-6 space-y-3">
  <div
    *ngFor="let todo of todos"
    class="bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow flex items-center justify-between gap-4"
  >
    <div class="flex items-center gap-3 flex-1">
      <input
        type="checkbox"
        [checked]="todo.isCompleted"
        (change)="onToggleTodo(todo.id)"
        [disabled]="isEditing(todo.id)"
        class="w-5 h-5 cursor-pointer rounded border-gray-300 text-blue-600 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"
        aria-label="Mark todo as complete"
      />

      <!-- View mode -->
      <p
        *ngIf="!isEditing(todo.id)"
        class="text-gray-800 flex-1 transition-all"
        [ngClass]="{ 'line-through text-gray-400': todo.isCompleted }"
      >
        {{ todo.text }}
      </p>

      <!-- Edit mode -->
      <input
        *ngIf="isEditing(todo.id)"
        #editInput
        type="text"
        [(ngModel)]="editingText"
        (keyup.enter)="onSaveTodo()"
        (keyup.escape)="onCancelEdit()"
        class="flex-1 px-3 py-2 border border-blue-500 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
        aria-label="Edit todo text"
      />
    </div>

    <div class="flex items-center gap-2">
      <!-- Edit mode buttons -->
      <ng-container *ngIf="isEditing(todo.id)">
        <button
          (click)="onSaveTodo()"
          class="text-green-600 hover:text-green-700 hover:bg-green-50 p-2 rounded-lg cursor-pointer transition-colors"
          aria-label="Save todo"
        >
          <app-checkmark-icon />
        </button>
        <button
          (click)="onCancelEdit()"
          class="text-gray-500 hover:text-gray-700 hover:bg-gray-50 p-2 rounded-lg cursor-pointer transition-colors"
          aria-label="Cancel edit"
        >
          <app-x-icon />
        </button>
      </ng-container>

      <!-- View mode buttons -->
      <ng-container *ngIf="!isEditing(todo.id)">
        <button
          (click)="onEditTodo(todo)"
          class="text-blue-500 hover:text-blue-700 hover:bg-blue-50 p-2 rounded-lg cursor-pointer transition-colors"
          aria-label="Edit todo"
        >
          <app-pencil-icon />
        </button>
        <button
          (click)="onDeleteTodo(todo.id)"
          class="text-red-500 hover:text-red-700 hover:bg-red-50 p-2 rounded-lg cursor-pointer transition-colors"
          aria-label="Delete todo"
        >
          <app-x-icon />
        </button>
      </ng-container>
    </div>
  </div>

  <div *ngIf="todos.length === 0" class="text-center text-gray-400 py-8">
    No todos yet. Add one to get started!
  </div>
</div>
